{"version":3,"sources":["webpack:///app.04ecd64753a4fbca8c95.bundle.js","webpack:///webpack/bootstrap 04ecd64753a4fbca8c95","webpack:///./server.js","webpack:///external \"webpack\"","webpack:///external \"webpack-dev-server\"","webpack:///./config/express.js","webpack:///external \"path\"","webpack:///external \"express\"","webpack:///external \"body-parser\"","webpack:///external \"express-validator\"","webpack:///external \"cors\"","webpack:///./config/errorHandler.js","webpack:///./config/jwt.js","webpack:///external \"jsonwebtoken\"","webpack:///./config/config.js","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"glob\"","webpack:///./config/env/all.js","webpack:///./app/routes/chat.route.js","webpack:///./app/controller/api/chat.server.controller.js","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"co\"","webpack:///./config/sequelize.js","webpack:///external \"sequelize\"","webpack:///external \"fs\"","webpack:///./config/env/path.js","webpack:///./app/models/Chat.js","webpack:///./app/models/Profile.js","webpack:///./app/models/RefreshToken.js","webpack:///./app/models/Route2.js","webpack:///./app/models/User.js","webpack:///external \"bcrypt\"","webpack:///./config/util.js","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///./app/routes/list.route.js","webpack:///./app/controller/api/route2.server.controller.js","webpack:///./app/routes/profile.route.js","webpack:///./app/controller/api/profile.server.controller.js","webpack:///./app/routes/users.route.js","webpack:///./app/controller/api/users.server.controller.js","webpack:///./app/controller/api/users/users.authentication.server.controller.js","webpack:///external \"passport\"","webpack:///./app/controller/api/users/users.server.controller.js","webpack:///./app/controller/api/users/users.password.server.controller.js","webpack:///./config/passport.js","webpack:///./config/strategies/local.js","webpack:///external \"passport-local\"","webpack:///./webpack.dev.config.js","webpack:///external \"webpack-node-externals\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","webpack","webpackDevServer","app","port","devPort","process","env","NODE_ENV","console","log","config","compiler","devServer","listen","require","path","express","bodyParser","expressValidator","CORS","errorHandler","jwt","use","json","urlencoded","extended","whitelist","corsOptions","origin","callback","originIsWhitelisted","indexOf","credentials","static","join","__dirname","req","res","next","headers","authorization","test","token","split","user","authenticateToken","error","e","router","Router","chat","list","profile","users","routes","route","err","originalMethod","method","headersSent","status","statusCode","send","message","body","url","originalUrl","core","generateToken","aud","jwtOptions","algorithm","expiresIn","issuer","sessionIssuer","audience","sign","sessionSecret","verify","_interopRequireDefault","obj","__esModule","default","getGlobbedFiles","globPatterns","removeRoot","urlRegex","RegExp","output","Array","isArray","forEach","globPattern","concat","push","files","glob","sync","map","file","replace","_assign","_assign2","tokenSecret","controller","get","getChat","post","createChat","delete","deleteChat","_regenerator","_regenerator2","co","db","util","Chat","_callee","result","page","size","data","paginator","wrap","_context","prev","query","parseInt","findAndCountAll","offset","limit","order","sent","rows","val","hour24","createdAt","getHours","hour12","time","getMinutes","dataValues","pagenation","totalCount","count","currentRowCount","length","t0","stop","this","_callee2","chatId","_context2","params","destroy","where","end","_callee3","errors","name","content","_context3","checkBody","notEmpty","validationErrors","create","Sequelize","fs","sequelize","host","dialect","rootPath","root","modelsDir","readdirSync","model","import","authenticate","then","key","options","associate","normalize","define","type","STRING","allowNull","paranoid","Profile","skill","description","mastery","INTEGER","DataTypes","RefreshToken","refreshToken","unique","expiredAt","DATE","models","belongsTo","User","foreignKey","Route2","bcrypt","passwordCheckHook","password","hashPassword","email","phone","rolse","age","resetPasswordToken","resetPasswordExpires","lastSignIn","instanceMethods","text","compareSync","salt","genSaltSync","hashSync","beforeCreate","beforeUpdate","_keys","_keys2","args","makeUrlFromParams","str","endPoint","_parsedOriginalUrl","pathname","prevPage","getRoute2","makeItem","deleteItem","attributes","items","catch","_chat","itemId","getStack","createStack","login","createRefreshToken","passport","info","Date","now","UserId","_user","jwToken","hostname","LocalStrategy","Strategy","usernameField","passwordField","userEmail","done","findOne","nodeExternals","target","externals","node","entry","filename","hot","publicPath","historyApiFallback","contentBase","proxy","**","plugins","optimize","OccurenceOrderPlugin","HotModuleReplacementPlugin","NoErrorsPlugin","loaders","loader","exclude","cacheDirectory","presets"],"mappings":"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","file":"app.04ecd64753a4fbca8c95.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"dist/04ecd64753a4fbca8c95\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// custom js module\n\t\n\tvar webpack = __webpack_require__(1),\n\t    webpackDevServer = __webpack_require__(2);\n\t\n\tvar app = __webpack_require__(3)();\n\t\n\tvar port = 80;\n\tvar devPort = 3002;\n\t\n\t__webpack_require__(43)();\n\t\n\t/**\n\t *   Sequelize setting\n\t */\n\t// let createSeed = function(){\n\t//   let sequelize = require('./config/sequelize');\n\t//   sequelize.sequelize.sync({\n\t//     force: true\n\t//   }).then(function () {\n\t//     require('./config/seed.js')(sequelize);\n\t//   });\n\t// };\n\t\n\t\n\tif (process.env.NODE_ENV == 'development') {\n\t  console.log('Server is running on development');\n\t\n\t  // createSeed();\n\t\n\t  var config = __webpack_require__(46);\n\t  var compiler = webpack(config);\n\t  var devServer = new webpackDevServer(compiler, config.devServer);\n\t  devServer.listen(devPort, function () {\n\t    console.log('webpack-dev-server is listening on port', devPort);\n\t  });\n\t}\n\t\n\tapp.listen(port, function () {\n\t  return console.log('production server is running on port' + port);\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack\");\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack-dev-server\");\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// node_module dependencies\n\t\n\tvar path = __webpack_require__(4),\n\t    express = __webpack_require__(5),\n\t    bodyParser = __webpack_require__(6),\n\t\n\t// nunjucks = require('nunjucks'),\n\texpressValidator = __webpack_require__(7),\n\t    CORS = __webpack_require__(8);\n\t\n\t// custom config modules\n\tvar errorHandler = __webpack_require__(9),\n\t    jwt = __webpack_require__(10);\n\t\n\tmodule.exports = function () {\n\t    var app = express();\n\t\n\t    //express engine\n\t    // app.engine('html', nunjucks.render);\n\t    // app.set('view engine', 'html');\n\t    // nunjucks.configure('./../front/views', {\n\t    //     autoescape: true,\n\t    //     express: app\n\t    // });\n\t\n\t    // express middleware\n\t    app.use(bodyParser.json());\n\t    app.use(bodyParser.urlencoded({ extended: false }));\n\t    app.use(expressValidator());\n\t\n\t    // Cross Origin Resource Sharing\n\t    var whitelist = ['http://52.78.225.119', 'http://localhost', 'http://localhost:8000', 'http://eleclion.org'];\n\t    var corsOptions = {\n\t        origin: function origin(_origin, callback) {\n\t            var originIsWhitelisted = whitelist.indexOf(_origin) !== -1;\n\t            callback(null, originIsWhitelisted);\n\t        },\n\t        credentials: true\n\t    };\n\t    app.use(CORS(corsOptions));\n\t\n\t    // express static\n\t    app.use(express.static(path.join(__dirname, '../public')));\n\t    app.use(express.static(path.join(__dirname, '../app')));\n\t    app.use(express.static(path.join(__dirname, '../front/build')));\n\t\n\t    // authentication middleware\n\t    app.use(function (req, res, next) {\n\t        try {\n\t            // headers.authorization ?\n\t            if (!req.headers || !req.headers.authorization) return next();\n\t\n\t            // authorization format ? 'Bearer + Token'\n\t            if (!/^Bearer/.test(req.headers.authorization)) return next();\n\t            var token = req.headers.authorization.split(' ')[1];\n\t\n\t            // jwt authenticate\n\t            var user = jwt.authenticateToken(token, next);\n\t            if (user.error) return next();\n\t            req.user = user;\n\t            next();\n\t        } catch (e) {\n\t            next(e);\n\t        }\n\t    });\n\t\n\t    // express index route\n\t    // app.get('/', function(req, res) {\n\t    //     res.render('index');\n\t    // });\n\t\n\t    var router = express.Router();\n\t\n\t    // Globbing route files\n\t    // webpack 컴파일 문제로 안씀\n\t    /* let pathth = path.join(__dirname, '../app/routes/*.js');\n\t       let files = config.getGlobbedFiles(pathth);\n\t       files.forEach((routePath) => {\n\t         let _router = require(routePath)(router);\n\t         console.log(routePath);\n\t         app.use(_router);\n\t       });\n\t    */\n\t\n\t    var chat = __webpack_require__(16)(router);\n\t    var list = __webpack_require__(32)(router);\n\t    var profile = __webpack_require__(34)(router);\n\t    var users = __webpack_require__(36)(router);\n\t    var routes = { chat: chat, list: list, profile: profile, users: users };\n\t\n\t    for (var route in routes) {\n\t        app.use(routes[route]);\n\t    }\n\t\n\t    app.use(errorHandler);\n\t\n\t    // Return Express server instance\n\t    return app;\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"express\");\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"body-parser\");\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"express-validator\");\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"cors\");\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function (err, req, res, next) {\n\t    if (!err) return next();\n\t    console.log(err); //eslint-disable-line\n\t\n\t    var route = req.originalMethod || req.method;\n\t\n\t    if (!res.headersSent) {\n\t        res.status(err.statusCode || 500).send({\n\t            message: err.message,\n\t            body: req.body,\n\t            url: req.originalUrl,\n\t            route: route\n\t        });\n\t    } else return next();\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar jwt = __webpack_require__(11),\n\t    config = __webpack_require__(12);\n\t\n\tmodule.exports.core = jwt;\n\t\n\tmodule.exports.generateToken = function (user, aud, next) {\n\t    try {\n\t        var jwtOptions = {\n\t            algorithm: 'HS256',\n\t            expiresIn: '3h',\n\t            issuer: config.sessionIssuer,\n\t            audience: aud\n\t        };\n\t        var token = jwt.sign(user, config.sessionSecret, jwtOptions);\n\t        console.log(token); // eslint-disable-line\n\t        return token;\n\t    } catch (e) {\n\t        return next(e);\n\t    }\n\t};\n\t\n\tmodule.exports.authenticateToken = function (token, aud) {\n\t    try {\n\t        var jwtOptions = {\n\t            algorithm: 'HS256',\n\t            expiresIn: '3h',\n\t            issuer: config.sessionIssuer,\n\t            audience: aud\n\t        };\n\t        var user = jwt.verify(token, config.sessionSecret, jwtOptions);\n\t        return user;\n\t    } catch (e) {\n\t        e.error = 'error';return e;\n\t    }\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"jsonwebtoken\");\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * Module dependencies.\n\t */\n\t\n\tvar _assign = __webpack_require__(13);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar glob = __webpack_require__(14);\n\t\n\t// Detail config exports\n\tmodule.exports = (0, _assign2.default)({}, __webpack_require__(15));\n\t\n\t/**\n\t * Get files by glob patterns\n\t */\n\tmodule.exports.getGlobbedFiles = getGlobbedFiles;\n\t\n\tfunction getGlobbedFiles(globPatterns, removeRoot) {\n\t  // URL paths regex\n\t  var urlRegex = new RegExp('^(?:[a-z]+:)?\\/\\/', 'i');\n\t\n\t  // The output array\n\t  var output = [];\n\t\n\t  // If glob pattern is array so we use each pattern in a recursive way, otherwise we use glob\n\t  if (Array.isArray(globPatterns)) {\n\t    globPatterns.forEach(function (globPattern) {\n\t      output = output.concat(getGlobbedFiles(globPattern, removeRoot));\n\t    });\n\t  } else if (typeof globPatterns == 'string') {\n\t    if (urlRegex.test(globPatterns)) {\n\t      output.push(globPatterns);\n\t    } else {\n\t      var files = glob(globPatterns, { sync: true });\n\t      if (removeRoot) {\n\t        files = files.map(function (file) {\n\t          return file.replace(removeRoot, '');\n\t        });\n\t      }\n\t      output = output.concat(files);\n\t    }\n\t  }\n\t  return output;\n\t}\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"babel-runtime/core-js/object/assign\");\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"glob\");\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t    sessionIssuer: 'eleclion.asia',\n\t    sessionSecret: 'My FeElInGs FoR yOu',\n\t    tokenSecret: 'I cOuLd Be ThE oNe'\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar controller = __webpack_require__(17);\n\t\n\tmodule.exports = function (router) {\n\t    router.route('/api/chat').get(controller.getChat).post(controller.createChat);\n\t    router.route('/api/chat/:chatId').delete(controller.deleteChat);\n\t\n\t    return router;\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _regenerator = __webpack_require__(18);\n\t\n\tvar _regenerator2 = _interopRequireDefault(_regenerator);\n\t\n\tvar _assign = __webpack_require__(13);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar co = __webpack_require__(19),\n\t    db = __webpack_require__(20),\n\t    util = __webpack_require__(30),\n\t    Chat = db.Chat;\n\t\n\t/**\n\t* GET: /api/chat\n\t* @param req\n\t* @param res\n\t* @param next\n\t*/\n\t\n\tmodule.exports.getChat = function (req, res, next) {\n\t    co(_regenerator2.default.mark(function _callee() {\n\t        var result, page, size, data, chat, paginator;\n\t        return _regenerator2.default.wrap(function _callee$(_context) {\n\t            while (1) {\n\t                switch (_context.prev = _context.next) {\n\t                    case 0:\n\t                        _context.prev = 0;\n\t                        page = req.query.page ? parseInt(req.query.page) : 0;\n\t                        size = 20;\n\t                        _context.next = 5;\n\t                        return Chat.findAndCountAll({\n\t                            offset: page,\n\t                            limit: size,\n\t                            order: 'id desc'\n\t                        });\n\t\n\t                    case 5:\n\t                        data = _context.sent;\n\t                        chat = data.rows.map(function (val) {\n\t                            var hour24 = val.createdAt.getHours();\n\t                            var hour12 = hour24 / 12 > 1 ? '오후 ' + hour24 % 12 : '오전 ' + hour24;\n\t                            var time = hour12 + ':' + val.createdAt.getMinutes();\n\t                            return (0, _assign2.default)(val.dataValues, { time: time });\n\t                        });\n\t                        paginator = util.pagenation({\n\t                            req: req,\n\t                            size: size,\n\t                            totalCount: data.count,\n\t                            currentRowCount: data.rows.length\n\t                        });\n\t\n\t\n\t                        result = (0, _assign2.default)({\n\t                            count: data.count,\n\t                            chat: chat\n\t                        }, paginator);\n\t                        res.send(result);\n\t                        _context.next = 15;\n\t                        break;\n\t\n\t                    case 12:\n\t                        _context.prev = 12;\n\t                        _context.t0 = _context['catch'](0);\n\t                        next(_context.t0);\n\t                    case 15:\n\t                    case 'end':\n\t                        return _context.stop();\n\t                }\n\t            }\n\t        }, _callee, this, [[0, 12]]);\n\t    }));\n\t};\n\t\n\t/**\n\t* DELETE: /api/chat/:chatId\n\t* @param req\n\t* @param res\n\t* @param next\n\t*/\n\tmodule.exports.deleteChat = function (req, res, next) {\n\t    co(_regenerator2.default.mark(function _callee2() {\n\t        var chatId;\n\t        return _regenerator2.default.wrap(function _callee2$(_context2) {\n\t            while (1) {\n\t                switch (_context2.prev = _context2.next) {\n\t                    case 0:\n\t                        _context2.prev = 0;\n\t                        chatId = req.params.chatId;\n\t                        _context2.next = 4;\n\t                        return Chat.destroy({\n\t                            where: {\n\t                                id: chatId\n\t                            }\n\t                        });\n\t\n\t                    case 4:\n\t                        res.end();\n\t                        _context2.next = 10;\n\t                        break;\n\t\n\t                    case 7:\n\t                        _context2.prev = 7;\n\t                        _context2.t0 = _context2['catch'](0);\n\t                        next(_context2.t0);\n\t                    case 10:\n\t                    case 'end':\n\t                        return _context2.stop();\n\t                }\n\t            }\n\t        }, _callee2, this, [[0, 7]]);\n\t    }));\n\t};\n\t\n\t/**\n\t* POST: /api/chat\n\t* @param req\n\t* @param res\n\t* @param next\n\t*/\n\tmodule.exports.createChat = function (req, res, next) {\n\t    co(_regenerator2.default.mark(function _callee3() {\n\t        var errors, name, content;\n\t        return _regenerator2.default.wrap(function _callee3$(_context3) {\n\t            while (1) {\n\t                switch (_context3.prev = _context3.next) {\n\t                    case 0:\n\t                        // empty input value checking!\n\t                        req.checkBody('name', '이름을 입력해주세요').notEmpty();\n\t                        req.checkBody('content', '내용을 입력해주세요').notEmpty();\n\t                        errors = req.validationErrors();\n\t\n\t                        if (errors) {\n\t                            _context3.next = 17;\n\t                            break;\n\t                        }\n\t\n\t                        _context3.prev = 4;\n\t                        name = req.body.name;\n\t                        content = req.body.content;\n\t                        _context3.next = 9;\n\t                        return Chat.create({\n\t                            name: name,\n\t                            content: content\n\t                        });\n\t\n\t                    case 9:\n\t                        res.end();\n\t                        _context3.next = 15;\n\t                        break;\n\t\n\t                    case 12:\n\t                        _context3.prev = 12;\n\t                        _context3.t0 = _context3['catch'](4);\n\t\n\t                        next(_context3.t0);\n\t\n\t                    case 15:\n\t                        _context3.next = 18;\n\t                        break;\n\t\n\t                    case 17:\n\t                        res.send(errors[0]);\n\t\n\t                    case 18:\n\t                    case 'end':\n\t                        return _context3.stop();\n\t                }\n\t            }\n\t        }, _callee3, this, [[4, 12]]);\n\t    }));\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"babel-runtime/regenerator\");\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"co\");\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _assign = __webpack_require__(13);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Sequelize = __webpack_require__(21),\n\t    path = __webpack_require__(4),\n\t    fs = __webpack_require__(22),\n\t    db = {};\n\t\n\tvar sequelize = new Sequelize('spaApp', 'root', '', {\n\t  host: '127.0.0.1',\n\t  dialect: 'mysql',\n\t  port: 3306\n\t});\n\t\n\tvar rootPath = __webpack_require__(23).root;\n\tvar modelsDir = rootPath + '/app/models';\n\t\n\t// loop through all files in models directory ignoring hidden files and this file\n\tfs.readdirSync(modelsDir)\n\t// .filter(file => (file.indexOf('.') !== -1))\n\t\n\t// import model files and save model names\n\t.forEach(function (file) {\n\t  console.log('Loading model file ' + file);\n\t  var model = sequelize.import(path.join(modelsDir, file));\n\t  db[model.name] = model;\n\t});\n\t\n\tsequelize.authenticate().then(function () {\n\t  return console.log('Connection has been established successfully.');\n\t}, function (err) {\n\t  return console.log('Unable to connect to the database:', err);\n\t});\n\t\n\t//require model files\n\t__webpack_require__(24);\n\t__webpack_require__(25);\n\t__webpack_require__(26);\n\t__webpack_require__(27);\n\t__webpack_require__(28);\n\t\n\tfor (var key in db) {\n\t  if (db[key].options.associate) db[key].options.associate(db);\n\t}\n\t\n\t// assign the sequelize letiables to the db object and returning the db.\n\tmodule.exports = (0, _assign2.default)({\n\t  sequelize: sequelize,\n\t  Sequelize: Sequelize\n\t}, db);\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"sequelize\");\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar path = __webpack_require__(4);\n\tvar root = path.normalize(__dirname + '/../..');\n\t\n\tconsole.log(root);\n\t\n\tmodule.exports = {\n\t    root: root\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t *\n\t * Chat\n\t */\n\t\n\tvar Sequelize = __webpack_require__(21);\n\t\n\tmodule.exports = function (sequelize) {\n\t    var Chat = sequelize.define('Chat', {\n\t        name: {\n\t            type: Sequelize.STRING(10),\n\t            allowNull: false\n\t        },\n\t        content: {\n\t            type: Sequelize.STRING(255),\n\t            allowNull: false\n\t        }\n\t    }, {\n\t        paranoid: true\n\t    });\n\t    return Chat;\n\t};\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t *\n\t * Profile\n\t */\n\t\n\tvar Sequelize = __webpack_require__(21);\n\t\n\tmodule.exports = function (sequelize) {\n\t    var Profile = sequelize.define('Profile', {\n\t        skill: {\n\t            type: Sequelize.STRING(10),\n\t            allowNull: false\n\t        },\n\t        type: {\n\t            type: Sequelize.STRING(10),\n\t            allowNull: false\n\t        },\n\t        description: {\n\t            type: Sequelize.STRING(255),\n\t            allowNull: false\n\t        },\n\t        mastery: {\n\t            type: Sequelize.INTEGER(3),\n\t            allowNull: false\n\t        }\n\t    }, {\n\t        paranoid: true\n\t    });\n\t    return Profile;\n\t};\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t *\n\t * 유저 Refresh Token\n\t */\n\t\n\tmodule.exports = function (sequelize, DataTypes) {\n\t    var RefreshToken = sequelize.define('RefreshToken', {\n\t        refreshToken: {\n\t            type: DataTypes.STRING,\n\t            allowNull: false,\n\t            unique: true\n\t        },\n\t        expiredAt: {\n\t            type: DataTypes.DATE,\n\t            allowNull: false\n\t        }\n\t    }, {\n\t        associate: function associate(models) {\n\t            RefreshToken.belongsTo(models.User, { foreignKey: { allowNull: false } });\n\t        }\n\t    });\n\t    return RefreshToken;\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t *\n\t * Route 2\n\t */\n\t\n\tvar Sequelize = __webpack_require__(21);\n\t\n\tmodule.exports = function (sequelize) {\n\t    var Route2 = sequelize.define('Route2', {\n\t        name: {\n\t            type: Sequelize.STRING(10),\n\t            allowNull: true\n\t        },\n\t        content: {\n\t            type: Sequelize.STRING(255),\n\t            allowNull: false\n\t        }\n\t    }, {\n\t        paranoid: true\n\t    });\n\t    return Route2;\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t *\n\t * User\n\t */\n\t\n\tvar Sequelize = __webpack_require__(21),\n\t    bcrypt = __webpack_require__(29);\n\t\n\tmodule.exports = function (sequelize) {\n\t    var User = sequelize.define('User', {\n\t        email: {\n\t            type: Sequelize.STRING(255),\n\t            allowNull: false\n\t        },\n\t        password: {\n\t            type: Sequelize.STRING,\n\t            allowNull: false\n\t        },\n\t        phone: {\n\t            type: Sequelize.STRING,\n\t            allowNull: false\n\t        },\n\t        rolse: {\n\t            type: Sequelize.STRING\n\t        },\n\t        age: {\n\t            type: Sequelize.INTEGER(3),\n\t            allowNull: false\n\t        },\n\t        resetPasswordToken: {\n\t            type: Sequelize.STRING,\n\t            unique: true\n\t        },\n\t        resetPasswordExpires: {\n\t            type: Sequelize.DATE\n\t        },\n\t        lastSignIn: {\n\t            type: Sequelize.DATE\n\t        }\n\t    }, {\n\t        paranoid: true,\n\t        instanceMethods: {\n\t            authenticate: function authenticate(text) {\n\t                return bcrypt.compareSync(text, this.password);\n\t            },\n\t            hashPassword: function hashPassword(password) {\n\t                var salt = bcrypt.genSaltSync(10);\n\t                return bcrypt.hashSync(password, salt);\n\t            }\n\t        }\n\t        // DB 참조 (추후 활용 시도)\n\t        // associate: function(models) {\n\t        //         User.hasMany(models.UserDevice, {\n\t        //             foreignKey: {\n\t        //                 name: 'userId',\n\t        //                 allowNull: false\n\t        //             }\n\t        //         });\n\t        //         User.hasMany(models.TruckManagement, {\n\t        //             foreignKey: {\n\t        //                 name: 'userId',\n\t        //                 allowNull: false\n\t        //             }\n\t        //         });\n\t        //     }\n\t    });\n\t\n\t    User.beforeCreate(passwordCheckHook);\n\t    User.beforeUpdate(passwordCheckHook);\n\t\n\t    function passwordCheckHook(user) {\n\t        if (user && user.password && typeof user.password == 'string') {\n\t            if (user.password.length >= 6 && user.password.length <= 4096) {\n\t                user.password = user.hashPassword(user.password);\n\t            } else {\n\t                throw { message: '비밀번호 길이를 체크해주십시오' };\n\t            }\n\t        }\n\t    }\n\t\n\t    return User;\n\t};\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"bcrypt\");\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _keys = __webpack_require__(31);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar config = __webpack_require__(12);\n\t\n\tmodule.exports.pagenation = function (args) {\n\t    args.req = args.req || {};\n\t\n\t    var path = args.req._parsedOriginalUrl.pathname || '';\n\t    var query = args.req.query || {};\n\t    var size = args.size || 20;\n\t    var page = parseInt(query.page) || 0;\n\t    var totalCount = args.totalCount || 0;\n\t    var currentRowCount = args.currentRowCount || 0;\n\t\n\t    var prev = null,\n\t        next = null;\n\t\n\t    if (page !== 0) {\n\t        var prevPage = page - size;\n\t        prevPage = prevPage < 0 ? 0 : prevPage;\n\t        query.page = prevPage;\n\t        prev = makeUrlFromParams(query);\n\t    }\n\t\n\t    if (currentRowCount == size && page + currentRowCount != totalCount) {\n\t        query.page = page + size;\n\t        next = makeUrlFromParams(query);\n\t    }\n\t\n\t    function makeUrlFromParams(params) {\n\t        var str = (0, _keys2.default)(params).map(function (key) {\n\t            return key + '=' + params[key];\n\t        }).join('&');\n\t        return config.endPoint + path + '?' + str;\n\t    }\n\t\n\t    return {\n\t        prev: prev,\n\t        next: next\n\t    };\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"babel-runtime/core-js/object/keys\");\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar controller = __webpack_require__(33);\n\t\n\tmodule.exports = function (router) {\n\t  router.route('/api/route2').get(controller.getRoute2).post(controller.makeItem);\n\t  router.route('/api/route2/:itemId').delete(controller.deleteItem);\n\t\n\t  return router;\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _regenerator = __webpack_require__(18);\n\t\n\tvar _regenerator2 = _interopRequireDefault(_regenerator);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar db = __webpack_require__(20),\n\t    co = __webpack_require__(19),\n\t    Route2 = db.Route2;\n\t\n\t/**\n\t*  GET: /api/route2\n\t*  @param req\n\t*  @param res\n\t*  @param next\n\t*/\n\tmodule.exports.getRoute2 = function (req, res, next) {\n\t\n\t    Route2.findAndCountAll({\n\t        attributes: ['id', 'name', 'content', 'createdAt'],\n\t        order: 'id desc'\n\t    }).then(function (result) {\n\t        result = {\n\t            id: result.id,\n\t            count: result.count,\n\t            items: result.rows\n\t        };\n\t        res.send(result);\n\t    }).catch(next);\n\t};\n\t\n\t/**\n\t*  POST: /api/route2\n\t*  @param req\n\t*  @param res\n\t*  @param next\n\t*/\n\tmodule.exports.makeItem = function (req, res, next) {\n\t    var name = req.body.name;\n\t    var chat = req.body.chat;\n\t\n\t    Route2.create({\n\t        name: name,\n\t        content: chat\n\t    }).then(function (_chat) {\n\t        res.send(_chat);\n\t    }).catch(next);\n\t};\n\t\n\t/**\n\t* DELETE: /api/route2/:itemId\n\t* @param req\n\t* @param res\n\t* @param next\n\t*/\n\tmodule.exports.deleteItem = function (req, res, next) {\n\t    co(_regenerator2.default.mark(function _callee() {\n\t        var itemId;\n\t        return _regenerator2.default.wrap(function _callee$(_context) {\n\t            while (1) {\n\t                switch (_context.prev = _context.next) {\n\t                    case 0:\n\t                        _context.prev = 0;\n\t                        itemId = req.params.itemId;\n\t                        _context.next = 4;\n\t                        return Route2.destroy({\n\t                            where: {\n\t                                id: itemId\n\t                            }\n\t                        });\n\t\n\t                    case 4:\n\t                        res.end();\n\t                        _context.next = 10;\n\t                        break;\n\t\n\t                    case 7:\n\t                        _context.prev = 7;\n\t                        _context.t0 = _context['catch'](0);\n\t                        next(_context.t0);\n\t                    case 10:\n\t                    case 'end':\n\t                        return _context.stop();\n\t                }\n\t            }\n\t        }, _callee, this, [[0, 7]]);\n\t    }));\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar controller = __webpack_require__(35);\n\t\n\tmodule.exports = function (router) {\n\t    router.route('/api/stack').get(controller.getStack).post(controller.createStack);\n\t    return router;\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar db = __webpack_require__(20),\n\t    Profile = db.Profile;\n\t\n\t/**\n\t *  GET: /api/stack\n\t *  @param req\n\t *  @param res\n\t *  @param next\n\t */\n\tmodule.exports.getStack = function (req, res, next) {\n\t\n\t    Profile.findAndCountAll({\n\t        attributes: ['id', 'skill', 'type', 'description', 'mastery']\n\t    }).then(function (result) {\n\t        return res.send(result.rows);\n\t    }).catch(function (err) {\n\t        return next(err);\n\t    });\n\t};\n\t\n\t/**\n\t *  POST: /api/stack\n\t *  @param req\n\t *  @param res\n\t *  @param next\n\t */\n\tmodule.exports.createStack = function (req, res, next) {\n\t\n\t    req.checkBody('skill', '스킬을 입력해주세요').notEmpty();\n\t    req.checkBody('type', '종류를 입력해주세요').notEmpty();\n\t    req.checkBody('description', '설명을 입력해주세요').notEmpty();\n\t    req.checkBody('mastery', '숙련도를 입력해주세요').notEmpty();\n\t\n\t    var errors = req.validationErrors();\n\t\n\t    if (errors) {\n\t        res.send(errors[0]);\n\t        return;\n\t    }\n\t\n\t    var skill = req.body.skill,\n\t        type = req.body.type,\n\t        description = req.body.description,\n\t        mastery = req.body.mastery;\n\t\n\t    Profile.create({\n\t        skill: skill,\n\t        type: type,\n\t        description: description,\n\t        mastery: mastery\n\t    }).then(function (result) {\n\t        return res.send(result);\n\t    }).catch(function (err) {\n\t        return next(err);\n\t    });\n\t};\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar controller = __webpack_require__(37);\n\t\n\tmodule.exports = function (router) {\n\t    // 로그인 및 회원가입\n\t    // router.route('/auth/signup').post(controller.signup);\n\t    router.route('/auth/login').post(controller.login);\n\t    // router.route('/auth/logout').get(controller.logout);\n\t    // router.route('/auth/refresh').post(controller.refresh);\n\t\n\t    // 내정보 & 탈퇴\n\t    // router.route('/users/me')\n\t    //     .get(controller.requiresLogin, controller.getMyInfo)\n\t    //     .put(controller.requiresLogin, controller.changeMyInfo)\n\t    //     .delete(controller.requiresLogin, controller.leave);\n\t    //\n\t    // router.route('/users/email/verification').post(controller.emailVerification);\n\t    // router.route('/users/phone/verification').post(controller.phoneVerification);\n\t    // router.route('/users/phone/verification/send').post(controller.sendPhoneVerification);\n\t    //\n\t\n\t\n\t    // router.route('/users/password').post(controller.findPassword);\n\t    // router.route('/users/password/:token')\n\t    //     .get(controller.validateResetToken)\n\t    //     .put(controller.reset);\n\t\n\t\n\t    //\n\t    // router.route('/devices/:uuid').put(controller.changeDeviceGeom);\n\t\n\t    return router;\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * Extend user's controller\n\t */\n\t\n\tvar _assign = __webpack_require__(13);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = (0, _assign2.default)({}, __webpack_require__(38), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42));\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar passport = __webpack_require__(39),\n\t    bcrypt = __webpack_require__(29),\n\t    jwt = __webpack_require__(10),\n\t    config = __webpack_require__(15),\n\t    db = __webpack_require__(20),\n\t    RefreshToken = db.RefreshToken;\n\t\n\t/**\n\t* POST: /auth/login\n\t* @param req\n\t* @param res\n\t* @param next\n\t*/\n\t\n\tmodule.exports.login = function (req, res, next) {\n\t    // check body\n\t    req.checkBody('userEmail', '이메일을 입력해주세요').notEmpty();\n\t    req.checkBody('password', '패스워드를 입력해주세요').notEmpty();\n\t    var errors = req.validationErrors();\n\t    if (!errors) {\n\t        passport.authenticate('local', function (err, user, info) {\n\t            if (err || !user) {\n\t                next({ message: info.message || err.message, statusCode: 401 });\n\t            } else {\n\t                (function () {\n\t\n\t                    var refreshToken = createRefreshToken();\n\t\n\t                    RefreshToken.create({\n\t                        refreshToken: refreshToken,\n\t                        expiredAt: Date.now() + 1000 * 60 * 60 * 24 * 30,\n\t                        UserId: user.id\n\t                    }).then(function () {\n\t                        var _user = { id: user.id, email: user.email };\n\t                        var jwToken = jwt.generateToken(_user, req.hostname, next);\n\t                        res.send({ 'refreshToken': refreshToken, 'jwToken': jwToken, 'user': user.email });\n\t                    });\n\t                })();\n\t            }\n\t        })(req, res, next);\n\t    } else {\n\t        res.send(errors[0]);\n\t    }\n\t};\n\t\n\t/**\n\t* POST: /auth/refresh\n\t* @param req\n\t* @param res\n\t* @param next\n\t*/\n\t\n\t// module.exports.refresh = (req, res, next) => {\n\t//     next();\n\t//     return 'e';\n\t//\n\t// };\n\t\n\t\n\tfunction createRefreshToken() {\n\t    var salt = bcrypt.genSaltSync(10);\n\t    return bcrypt.hashSync(config.tokenSecret, salt);\n\t}\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"passport\");\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\t// 'use strict';\n\t\n\t// 추후 작업 (권한을 확인하는 API )\n\t\"use strict\";\n\n/***/ },\n/* 41 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t'추후 가능할 때 추가 작업 (user info 관련된 부분)';\n\t\n\t/*\n\t\n\tvar db = require('../../../../config/sequelize'),\n\t    BaseError = require('../../../models/abstract/BaseError'),\n\t    _ = require('lodash'),\n\t    async = require('async'),\n\t    User = db.User,\n\t    i18n = require('i18n'),\n\t    DeviceInfo = db.DeviceInfo,\n\t    PhoneVerification = db.PhoneVerification,\n\t    config = require('../../../../config/config'),\n\t    aws = require('../../../../config/aws'),\n\t    sms = require('../../../../config/sms'),\n\t    crypto = require('crypto');\n\n\n\t * GET: /users/me\n\t * Roles: ['user', 'truck']\n\t * @param req\n\t * @param res\n\t * @param next\n\n\tmodule.exports.getMyInfo = function(req, res, next) {\n\t    var user = req.user;\n\n\t    User.findOne({\n\t        where: {\n\t            id: user.id\n\t        },\n\t        attributes: ['id', 'profile', 'roles', 'username', 'email', 'phone', 'emailAgreedAt', 'smsAgreedAt', 'createdAt']\n\t    }).then(function(user) {\n\t        res.send(user);\n\t    }).catch(next);\n\t};\n\n\n\t * PUT: /users/me\n\t * Roles: ['user', 'truck']\n\t * @param req\n\t * @param res\n\t * @param next\n\n\tmodule.exports.changeMyInfo = function(req, res, next) {\n\t    var user = req.user;\n\n\t    var isAgreeEmail = req.body.isAgreeEmail;\n\t    var isAgreeSMS = req.body.isAgreeSMS;\n\n\t    async.waterfall([\n\t        function(nextStep) {\n\t            User.findOne({\n\t                where: {\n\t                    id: user.id\n\t                },\n\t                attributes: ['id', 'email', 'username', 'emailAgreedAt', 'smsAgreedAt', 'phone', 'profile']\n\t            }).then(function(user) {\n\t                if (!user) {\n\t                    nextStep(BaseError.getNotFoundErrorInstance(i18n.__('errors.notFound')));\n\t                } else {\n\t                    nextStep(null, user);\n\t                }\n\t            }).catch(nextStep);\n\t        },\n\t        function(user, nextStep) {\n\t            var editableKeys = ['password', 'username', 'phone', 'profile'];\n\n\t            if (isAgreeEmail && !user.emailAgreedAt) {\n\t                user.emailAgreedAt = new Date();\n\t            } else if (!isAgreeEmail && user.emailAgreedAt) {\n\t                user.emailAgreedAt = null;\n\t            }\n\n\t            if (isAgreeSMS && !user.smsAgreedAt) {\n\t                user.smsAgreedAt = new Date();\n\t            } else if (!isAgreeSMS && user.smsAgreedAt) {\n\t                user.smsAgreedAt = null;\n\t            }\n\n\t            _.each(editableKeys, function(key) {\n\t                if (req.body[key]) {\n\t                    user[key] = req.body[key];\n\t                }\n\t            });\n\n\t            user.save().then(function(user) {\n\t                nextStep(null, user);\n\t            }).catch(nextStep);\n\t        }\n\t    ], function(err, user) {\n\t        if (err) next(err);\n\t        else {\n\t            user.password = undefined;\n\t            res.send(user);\n\t        }\n\t    });\n\n\t};\n\n\n\t * PUT: /devices/:uuid\n\t * @param req\n\t * @param res\n\t * @param next\n\n\tmodule.exports.changeDeviceGeom = function(req, res, next) {\n\t    req.checkBody('lat', i18n.__('errors.requireParams')).notEmpty().isFloat();\n\t    req.checkBody('lng', i18n.__('errors.requireParams')).notEmpty().isFloat();\n\t    var errors = req.validationErrors();\n\t    if (errors) {\n\t        return next({message: errors[0].msg, statusCode: 400});\n\t    }\n\n\t    var uuid = req.params.uuid;\n\t    var lat = req.body.lat;\n\t    var lng = req.body.lng;\n\n\t    var currentGeom = {\n\t        type: 'Point',\n\t        coordinates: [lng, lat]\n\t    };\n\t    DeviceInfo.update({\n\t        currentGeom: currentGeom,\n\t        currentUpdatedAt: new Date()\n\t    },{\n\t        where: {\n\t            uuid: uuid\n\t        }\n\t    }).then(function() {\n\t        res.end();\n\t        // Close Statistics Query\n\t        var userId = req.user ? req.user.id : undefined;\n\t        aws.dynamoDB.createItem(aws.CONST.DYNAMO_DB.TABLE.USER_ROUTE, {\n\t            userId: userId,\n\t            deviceUUID: uuid,\n\t            currentGeom: currentGeom\n\t        });\n\t    }).catch(next);\n\t};\n\n\n\t * POST: /users/email/verification\n\t * @param req\n\t * @param res\n\t * @param next\n\n\tmodule.exports.emailVerification = function(req, res, next) {\n\t    req.checkBody('email', i18n.__('errors.requireParams')).notEmpty().isEmail();\n\t    var errors = req.validationErrors();\n\t    if (errors) {\n\t        return next({message: errors[0].msg, statusCode: 400});\n\t    }\n\n\t    var email = req.body.email;\n\t    User.count({\n\t        where: {\n\t            email: email\n\t        },\n\t        paranoid: false\n\t    }).then(function(cnt) {\n\t        if (cnt > 0) next({message: i18n.__('errors.alreadyExistEmail'), statusCode: 409});\n\t        else res.end();\n\t    }).catch(next);\n\t};\n\n\n\t * POST: /users/phone/verification\n\t * @param req\n\t * @param res\n\t * @param next\n\n\tmodule.exports.phoneVerification = function(req, res, next) {\n\t    req.checkBody('phone', i18n.__('errors.requireParams')).notEmpty();\n\t    req.checkBody('verificationCode', i18n.__('errors.requireParams')).notEmpty();\n\t    var errors = req.validationErrors();\n\t    if (errors) {\n\t        return next({message: errors[0].msg, statusCode: 400});\n\t    }\n\n\t    var phone = req.body.phone;\n\t    var verificationCode = req.body.verificationCode;\n\t    PhoneVerification.findOne({\n\t        where: {\n\t            phone: phone,\n\t            verificationCode: verificationCode,\n\t            expiredAt: {\n\t                $gt: new Date()\n\t            }\n\t        }\n\t    }).then(function(exist) {\n\t        if (exist) {\n\t            res.end();\n\t        } else {\n\t            next(BaseError.getNotFoundErrorInstance(i18n.__('errors.smsVerificationCode')));\n\t        }\n\t    }).catch(next);\n\n\t};\n\n\n\t * POST: /users/phone/verification/send\n\t * @param req\n\t * @param res\n\t * @param next\n\n\tmodule.exports.sendPhoneVerification = function(req, res, next) {\n\t    req.checkBody('phone', i18n.__('errors.requireParams')).notEmpty();\n\t    var errors = req.validationErrors();\n\t    if (errors) {\n\t        return next({message: errors[0].msg, statusCode: 400});\n\t    }\n\t    var phone = req.body.phone;\n\n\t    async.waterfall([\n\t        function(nextStep) {\n\t            PhoneVerification.findOne({\n\t                where: {\n\t                    phone: phone,\n\t                    expiredAt: {\n\t                        $gt: new Date()\n\t                    }\n\t                }\n\t            }).then(function(exist) {\n\t                if (exist) {\n\t                    nextStep({message: i18n.__('errors.alreadySendVerification'), statusCode: 409});\n\t                } else {\n\t                    nextStep();\n\t                }\n\t            }).catch(nextStep);\n\t        },\n\t        function(nextStep) {\n\t            var verificationCode = _.padStart(_.random(0, 999999), 6, '0');\n\t            PhoneVerification.create({\n\t                phone: phone,\n\t                verificationCode: verificationCode,\n\t                expiredAt: Date.now() + (60 * 1000 * 3) // 3 minute\n\t            }).then(function() {\n\t                nextStep(null, verificationCode);\n\t            }).catch(nextStep);\n\t        },\n\t        function(verificationCode, nextStep) {\n\t            sms.sendSMS(phone, i18n.__('sms.verificationCode', verificationCode)).then(function() {\n\t                nextStep(null, verificationCode);\n\t            }, nextStep);\n\t        }\n\t    ], function(err, verificationCode) {\n\t        if (err) next(err);\n\t        else res.end();\n\t    });\n\t};\n\n\n\t * DELETE: /users/me\n\t * 회원탈퇴\n\t * @param req\n\t * @param res\n\t * @param next\n\n\tmodule.exports.leave = function(req, res, next) {\n\t    var user = req.user;\n\t    User.destroy({\n\t        where: {\n\t            id: user.id\n\t        }\n\t    }).then(function() {\n\t        res.end();\n\t    }).catch(next);\n\t};\n\n\t*/\n\n/***/ },\n/* 42 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t// 비밀번호 찾기 controller\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = function () {\n\t    __webpack_require__(44)();\n\t};\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar passport = __webpack_require__(39),\n\t    LocalStrategy = __webpack_require__(45).Strategy,\n\t    db = __webpack_require__(20),\n\t    User = db.User;\n\t\n\tmodule.exports = function () {\n\t    // Use local strategy\n\t    passport.use(new LocalStrategy({\n\t        usernameField: 'userEmail',\n\t        passwordField: 'password'\n\t    }, function (userEmail, password, done) {\n\t\n\t        User.findOne({\n\t            where: {\n\t                email: userEmail\n\t            }\n\t        }).then(function (user) {\n\t            // 유저 없음\n\t            if (!user) {\n\t                return done(null, false, { message: '등록된 아이디가 아닙니다.' });\n\t            }\n\t            // 비밀번호 인증 실패\n\t            if (!user.authenticate(password)) {\n\t                return done(null, false, { message: '비밀번호가 틀렸습니다.' });\n\t            }\n\t            return done(null, user);\n\t        }).catch(function (err) {\n\t            console.log(err);done(err);\n\t        }); //eslint-disable-line\n\t    }));\n\t};\n\n/***/ },\n/* 45 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"passport-local\");\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar webpack = __webpack_require__(1);\n\tvar nodeExternals = __webpack_require__(47);\n\t\n\tmodule.exports = {\n\t\n\t  target: 'node',\n\t  externals: [nodeExternals()],\n\t  node: { __dirname: false },\n\t\n\t  entry: ['./server.js', 'webpack-dev-server/client?http://0.0.0.0:3002', 'webpack/hot/only-dev-server'],\n\t\n\t  output: {\n\t    path: '/',\n\t    filename: 'app.js'\n\t  },\n\t\n\t  devServer: {\n\t    hot: true,\n\t    filename: 'app.js',\n\t    publicPath: '/',\n\t    historyApiFallback: true,\n\t    contentBase: './dist',\n\t    proxy: {\n\t      \"**\": \"http://localhost:8000\"\n\t    }\n\t  },\n\t\n\t  plugins: [new webpack.optimize.OccurenceOrderPlugin(), new webpack.HotModuleReplacementPlugin(), new webpack.NoErrorsPlugin()],\n\t\n\t  module: {\n\t    loaders: [{\n\t      test: /\\.js$/,\n\t      loader: 'babel',\n\t      exclude: /node_modules/,\n\t      query: {\n\t        cacheDirectory: true,\n\t        presets: ['es2015']\n\t      }\n\t    }]\n\t  }\n\t};\n\n/***/ },\n/* 47 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack-node-externals\");\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// app.04ecd64753a4fbca8c95.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/04ecd64753a4fbca8c95\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 04ecd64753a4fbca8c95","'use strict';\n\n// custom js module\nconst webpack = require('webpack')\n    , webpackDevServer =  require('webpack-dev-server');\n\nconst app = require('./config/express')();\n\nconst port = 80;\nconst devPort = 3002;\n\nrequire('./config/passport')();\n\n/**\n *   Sequelize setting\n */\n// let createSeed = function(){\n//   let sequelize = require('./config/sequelize');\n//   sequelize.sequelize.sync({\n//     force: true\n//   }).then(function () {\n//     require('./config/seed.js')(sequelize);\n//   });\n// };\n\n\nif(process.env.NODE_ENV == 'development') {\n  console.log('Server is running on development');\n\n// createSeed();\n\n  const config = require('./webpack.dev.config');\n  let compiler = webpack(config);\n  let devServer = new webpackDevServer(compiler, config.devServer);\n  devServer.listen(devPort, () => {\n    console.log('webpack-dev-server is listening on port', devPort);\n  });\n}\n\napp.listen(port, () => console.log('production server is running on port' + port));\n\n\n\n// WEBPACK FOOTER //\n// ./server.js","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"webpack-dev-server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-server\"\n// module id = 2\n// module chunks = 0","'use strict';\n\n// node_module dependencies\nlet path = require('path'),\n    express = require('express'),\n    bodyParser = require('body-parser'),\n    // nunjucks = require('nunjucks'),\n    expressValidator = require('express-validator'),\n    CORS = require('cors');\n\n    // custom config modules\nlet errorHandler = require('./errorHandler'),\n    jwt = require('./jwt');\n\nmodule.exports = function(){\n    let app = express();\n\n    //express engine\n    // app.engine('html', nunjucks.render);\n    // app.set('view engine', 'html');\n    // nunjucks.configure('./../front/views', {\n    //     autoescape: true,\n    //     express: app\n    // });\n\n    // express middleware\n    app.use(bodyParser.json());\n    app.use(bodyParser.urlencoded({ extended: false}));\n    app.use(expressValidator());\n\n    // Cross Origin Resource Sharing\n    let whitelist = [\n        'http://52.78.225.119',\n        'http://localhost',\n        'http://localhost:8000',\n        'http://eleclion.org',\n    ];\n    let corsOptions = {\n        origin: function(origin, callback) {\n            let originIsWhitelisted = whitelist.indexOf(origin) !== -1;\n            callback(null, originIsWhitelisted);\n        },\n        credentials: true\n    };\n    app.use(CORS(corsOptions));\n\n    // express static\n    app.use(express.static(path.join(__dirname, '../public')));\n    app.use(express.static(path.join(__dirname, '../app')));\n    app.use(express.static(path.join(__dirname, '../front/build')));\n\n    // authentication middleware\n    app.use((req, res, next) => {\n    try {\n        // headers.authorization ?\n        if (!req.headers || !req.headers.authorization) return next();\n\n        // authorization format ? 'Bearer + Token'\n        if (!/^Bearer/.test(req.headers.authorization)) return next();\n        let token = req.headers.authorization.split(' ')[1];\n\n        // jwt authenticate\n        let user = jwt.authenticateToken(token, next);\n        if (user.error) return next();\n        req.user = user;\n        next();\n    } catch (e) { next(e);}\n    });\n\n    // express index route\n    // app.get('/', function(req, res) {\n    //     res.render('index');\n    // });\n\n    let router = express.Router();\n\n    // Globbing route files\n    // webpack 컴파일 문제로 안씀\n    /* let pathth = path.join(__dirname, '../app/routes/*.js');\n       let files = config.getGlobbedFiles(pathth);\n       files.forEach((routePath) => {\n         let _router = require(routePath)(router);\n         console.log(routePath);\n         app.use(_router);\n       });\n    */\n\n    let chat = require('../app/routes/chat.route.js')(router);\n    let list = require('../app/routes/list.route.js')(router);\n    let profile = require('../app/routes/profile.route.js')(router);\n    let users = require('../app/routes/users.route.js')(router);\n    const routes = { chat, list, profile, users};\n\n    for(let route in routes) {\n      app.use(routes[route]);\n    }\n\n    app.use(errorHandler);\n\n    // Return Express server instance\n    return app;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config/express.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"express-validator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-validator\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cors\"\n// module id = 8\n// module chunks = 0","'use strict';\n\nmodule.exports = (err, req, res, next) => {\n    if (!err) return next();\n    console.log(err); //eslint-disable-line\n\n    let route = req.originalMethod || req.method;\n\n    if (!res.headersSent) {\n    res.status(err.statusCode || 500).send({\n        message: err.message,\n        body: req.body,\n        url: req.originalUrl,\n        route: route\n    });\n} else return next();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config/errorHandler.js","'use strict';\n\nlet jwt = require('jsonwebtoken'),\n    config = require('./config');\n\nmodule.exports.core = jwt;\n\nmodule.exports.generateToken = (user, aud, next) => {\ntry {\n    let jwtOptions = {\n        algorithm: 'HS256',\n        expiresIn: '3h',\n        issuer: config.sessionIssuer,\n        audience: aud\n    };\n    let token = jwt.sign(user, config.sessionSecret, jwtOptions);\n    console.log(token); // eslint-disable-line\n    return token;\n} catch (e) {return next(e); }\n};\n\nmodule.exports.authenticateToken = (token, aud) => {\ntry {\n    let jwtOptions = {\n        algorithm: 'HS256',\n        expiresIn: '3h',\n        issuer: config.sessionIssuer,\n        audience: aud\n    };\n    let user = jwt.verify(token, config.sessionSecret, jwtOptions);\n    return user;\n} catch (e) { e.error = 'error'; return e; }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config/jwt.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 11\n// module chunks = 0","'use strict';\n\n/**\n * Module dependencies.\n */\nlet glob = require('glob');\n\n// Detail config exports\nmodule.exports = Object.assign({},\n    require('./env/all')\n);\n\n/**\n * Get files by glob patterns\n */\n module.exports.getGlobbedFiles = getGlobbedFiles;\n\n function getGlobbedFiles(globPatterns, removeRoot) {\n    // URL paths regex\n    let urlRegex = new RegExp('^(?:[a-z]+:)?\\/\\/', 'i');\n\n\t// The output array\n\tlet output = [];\n\n\t// If glob pattern is array so we use each pattern in a recursive way, otherwise we use glob\n\tif (Array.isArray(globPatterns)) {\n\t\tglobPatterns.forEach(globPattern => {\n\t\t\toutput = output.concat(getGlobbedFiles(globPattern, removeRoot));\n\t\t});\n\t} else if(typeof(globPatterns) == 'string') {\n      if (urlRegex.test(globPatterns)) {\n        output.push(globPatterns);\n      } else {\n          let files = glob(globPatterns, { sync: true });\n          if (removeRoot) {\n            files = files.map(function(file) {\n              return file.replace(removeRoot, '');\n            });\n          }\n          output = output.concat(files);\n        }\n      }\n\treturn output;\n }\n\n\n\n// WEBPACK FOOTER //\n// ./config/config.js","module.exports = require(\"babel-runtime/core-js/object/assign\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/assign\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"glob\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"glob\"\n// module id = 14\n// module chunks = 0","'use strict';\n\nmodule.exports = {\n    sessionIssuer: 'eleclion.asia',\n    sessionSecret: 'My FeElInGs FoR yOu',\n    tokenSecret: 'I cOuLd Be ThE oNe'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config/env/all.js","'use strict';\n\nlet controller = require('../controller/api/chat.server.controller.js');\n\nmodule.exports = function(router) {\n    router.route('/api/chat')\n        .get(controller.getChat)\n        .post(controller.createChat);\n    router.route('/api/chat/:chatId')\n        .delete(controller.deleteChat);\n\n    return router;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/routes/chat.route.js","'use strict';\n\nlet co = require('co'),\n    db = require('../../../config/sequelize'),\n    util = require('../../../config/util'),\n    Chat = db.Chat;\n\n/**\n* GET: /api/chat\n* @param req\n* @param res\n* @param next\n*/\n\nmodule.exports.getChat = (req, res, next) => {\n    co(function* (){\n    try {\n        var result;\n        let page = req.query.page ? parseInt(req.query.page) : 0;\n        let size = 20;\n\n        let data = yield Chat.findAndCountAll({\n            offset: page,\n            limit: size,\n            order: 'id desc'\n        });\n\n        let chat = data.rows.map(val => {\n            let hour24 = val.createdAt.getHours();\n            let hour12 = hour24 / 12 > 1 ? '오후 ' + hour24 % 12 : '오전 ' + hour24;\n            let time = hour12 + ':' + val.createdAt.getMinutes();\n            return Object.assign(val.dataValues, {time: time});\n        });\n\n        let paginator = util.pagenation({\n            req: req,\n            size: size,\n            totalCount: data.count,\n            currentRowCount: data.rows.length\n        });\n\n        result = Object.assign({\n            count: data.count,\n            chat: chat\n        }, paginator);\n        res.send(result);\n    } catch (e) { next(e); }\n    });\n};\n\n/**\n* DELETE: /api/chat/:chatId\n* @param req\n* @param res\n* @param next\n*/\nmodule.exports.deleteChat = function (req, res, next) {\n    co(function*(){\n    try{\n        let chatId = req.params.chatId;\n        yield Chat.destroy({\n            where: {\n                id: chatId\n            }\n        });\n        res.end();\n    } catch(e){ next(e);}\n    });\n};\n\n/**\n* POST: /api/chat\n* @param req\n* @param res\n* @param next\n*/\nmodule.exports.createChat = function (req, res, next) {\nco(function*(){\n    // empty input value checking!\n    req.checkBody('name', '이름을 입력해주세요').notEmpty();\n    req.checkBody('content', '내용을 입력해주세요').notEmpty();\n    let errors = req.validationErrors();\n    if (!errors) {\n        try {\n            let name = req.body.name;\n            let content = req.body.content;\n            yield Chat.create({\n                name: name,\n                content: content,\n            });\n            res.end();\n        } catch (e) {\n            next(e);\n        }\n    } else {\n        res.send(errors[0]);\n    }\n});\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/controller/api/chat.server.controller.js","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"co\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"co\"\n// module id = 19\n// module chunks = 0","'use strict';\n\nlet Sequelize = require('sequelize'),\n    path = require('path'),\n    fs = require('fs'),\n    db = {};\n\n\nlet sequelize = new Sequelize(\n    'spaApp',\n    'root',\n    '', {\n        host: '127.0.0.1',\ndialect: 'mysql',\n\tport: 3306\n});\n\nconst rootPath = require('./env/path').root;\nvar modelsDir = rootPath + '/app/models';\n\n// loop through all files in models directory ignoring hidden files and this file\nfs.readdirSync(modelsDir)\n// .filter(file => (file.indexOf('.') !== -1))\n\n// import model files and save model names\n\t.forEach(file => {\n\t\tconsole.log('Loading model file ' + file);\n\t\tlet model = sequelize.import(path.join(modelsDir, file));\n\t\tdb[model.name] = model;\n\t});\n\nsequelize\n    .authenticate()\n    .then(() => console.log('Connection has been established successfully.'),\n     (err) => console.log('Unable to connect to the database:', err));\n\n//require model files\nrequire('../app/models/Chat.js');\nrequire('../app/models/Profile.js');\nrequire('../app/models/RefreshToken.js');\nrequire('../app/models/Route2.js');\nrequire('../app/models/User.js');\n\n\n\n\nfor (let key in db) {\n    if (db[key].options.associate)\n        db[key].options.associate(db);\n}\n\n// assign the sequelize letiables to the db object and returning the db.\nmodule.exports = Object.assign({\n\tsequelize: sequelize,\n\tSequelize: Sequelize\n}, db);\n\n\n\n// WEBPACK FOOTER //\n// ./config/sequelize.js","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 22\n// module chunks = 0","'use strict';\n\nconst path = require('path');\nconst root = path.normalize(__dirname + '/../..');\n\nconsole.log(root);\n\nmodule.exports = {\n    root\n};\n\n\n// WEBPACK FOOTER //\n// ./config/env/path.js","'use strict';\n\n/**\n *\n * Chat\n */\n\nlet Sequelize = require('sequelize');\n\nmodule.exports = function(sequelize) {\n    let Chat = sequelize.define('Chat', {\n        name: {\n            type: Sequelize.STRING(10),\n            allowNull: false\n        },\n        content: {\n            type: Sequelize.STRING(255),\n            allowNull: false\n        }\n    }, {\n        paranoid: true\n    });\n    return Chat;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/models/Chat.js","'use strict';\n\n/**\n *\n * Profile\n */\n\nlet Sequelize = require('sequelize');\n\nmodule.exports = function(sequelize) {\n    let Profile = sequelize.define('Profile', {\n        skill: {\n            type: Sequelize.STRING(10),\n            allowNull: false\n        },\n        type: {\n            type: Sequelize.STRING(10),\n            allowNull: false\n        },\n        description: {\n            type: Sequelize.STRING(255),\n            allowNull: false\n        },\n        mastery: {\n            type: Sequelize.INTEGER(3),\n            allowNull: false\n        }\n    }, {\n        paranoid: true\n    });\n    return Profile;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/models/Profile.js","'use strict';\n\n/**\n *\n * 유저 Refresh Token\n */\n\nmodule.exports = function(sequelize, DataTypes) {\n    var RefreshToken = sequelize.define('RefreshToken', {\n            refreshToken: {\n                type: DataTypes.STRING,\n                allowNull: false,\n                unique: true\n            },\n            expiredAt: {\n                type: DataTypes.DATE,\n                allowNull: false\n            }\n        },\n        {\n            associate: function(models) {\n                RefreshToken.belongsTo(models.User, {foreignKey: {allowNull: false}});\n            }\n        }\n    );\n    return RefreshToken;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/models/RefreshToken.js","'use strict';\n\n/**\n *\n * Route 2\n */\n\nlet Sequelize = require('sequelize');\n\nmodule.exports = function(sequelize) {\n    let Route2 = sequelize.define('Route2', {\n        name: {\n            type: Sequelize.STRING(10),\n            allowNull: true\n        },\n        content: {\n            type: Sequelize.STRING(255),\n            allowNull: false\n        },\n    }, {\n        paranoid: true\n    });\n    return Route2;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/models/Route2.js","'use strict';\n\n/**\n *\n * User\n */\n\nlet Sequelize = require('sequelize'),\n    bcrypt = require('bcrypt');\n\nmodule.exports = function(sequelize) {\n    let User = sequelize.define('User', {\n        email: {\n            type: Sequelize.STRING(255),\n            allowNull: false\n        },\n        password: {\n            type: Sequelize.STRING,\n            allowNull: false\n        },\n        phone: {\n            type: Sequelize.STRING,\n            allowNull: false\n        },\n        rolse: {\n            type: Sequelize.STRING\n        },\n        age: {\n            type: Sequelize.INTEGER(3),\n            allowNull: false\n        },\n        resetPasswordToken: {\n            type: Sequelize.STRING,\n            unique: true\n        },\n        resetPasswordExpires: {\n            type: Sequelize.DATE\n        },\n        lastSignIn: {\n            type: Sequelize.DATE\n        }\n    }, {\n        paranoid: true,\n        instanceMethods: {\n            authenticate: function(text) {\n                return bcrypt.compareSync(text, this.password);\n            },\n            hashPassword: function(password) {\n                var salt = bcrypt.genSaltSync(10);\n                return bcrypt.hashSync(password, salt);\n            }\n        }\n        // DB 참조 (추후 활용 시도)\n        // associate: function(models) {\n        //         User.hasMany(models.UserDevice, {\n        //             foreignKey: {\n        //                 name: 'userId',\n        //                 allowNull: false\n        //             }\n        //         });\n        //         User.hasMany(models.TruckManagement, {\n        //             foreignKey: {\n        //                 name: 'userId',\n        //                 allowNull: false\n        //             }\n        //         });\n        //     }\n    });\n\n    User.beforeCreate(passwordCheckHook);\n    User.beforeUpdate(passwordCheckHook);\n\n    function passwordCheckHook(user) {\n        if (user && user.password && typeof(user.password) == 'string') {\n            if (user.password.length >= 6 && user.password.length <= 4096) {\n                user.password = user.hashPassword(user.password);\n            } else {\n                throw {message: '비밀번호 길이를 체크해주십시오'};\n            }\n        }\n    }\n\n    return User;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/models/User.js","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 29\n// module chunks = 0","'use strict';\n\nlet config = require('./config');\n\nmodule.exports.pagenation = function(args) {\n    args.req = args.req || {};\n\n    let path = args.req._parsedOriginalUrl.pathname || '';\n    let query = args.req.query || {};\n    let size = args.size || 20;\n    let page = parseInt(query.page) || 0;\n    let totalCount = args.totalCount || 0;\n    let currentRowCount = args.currentRowCount || 0;\n\n    let prev = null, next = null;\n\n    if (page !== 0) {\n        let prevPage = (page - size);\n        prevPage = prevPage < 0 ? 0 : prevPage;\n        query.page = prevPage;\n        prev = makeUrlFromParams(query);\n    }\n\n    if (currentRowCount == size && (page + currentRowCount) != totalCount) {\n        query.page = page + size;\n        next = makeUrlFromParams(query);\n    }\n\n    function makeUrlFromParams(params) {\n        let str = Object.keys(params).map(function(key) {\n            return key + '=' + params[key];\n        }).join('&');\n        return config.endPoint + path + '?' + str;\n    }\n\n    return {\n        prev: prev,\n        next: next\n    };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config/util.js","module.exports = require(\"babel-runtime/core-js/object/keys\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/keys\"\n// module id = 31\n// module chunks = 0","'use strict';\n\nlet controller = require('../controller/api/route2.server.controller.js');\n\nmodule.exports = function(router) {\n    router.route('/api/route2')\n      .get(controller.getRoute2)\n      .post(controller.makeItem);\n    router.route('/api/route2/:itemId')\n      .delete(controller.deleteItem);\n\n    return router;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/routes/list.route.js","'use strict';\n\nlet db = require('../../../config/sequelize'),\n    co = require('co'),\n    Route2 = db.Route2;\n\n/**\n*  GET: /api/route2\n*  @param req\n*  @param res\n*  @param next\n*/\nmodule.exports.getRoute2 = (req, res, next) => {\n\n    Route2.findAndCountAll({\n        attributes: ['id', 'name', 'content', 'createdAt'],\n        order: 'id desc'\n    })\n    .then((result) => {\n        result = {\n            id: result.id,\n            count: result.count,\n            items: result.rows\n        };\n        res.send(result);\n    })\n    .catch(next);\n\n};\n\n/**\n*  POST: /api/route2\n*  @param req\n*  @param res\n*  @param next\n*/\nmodule.exports.makeItem = function (req, res, next){\n    let name = req.body.name;\n    let chat = req.body.chat;\n\n    Route2.create({\n        name: name,\n        content: chat\n    })\n    .then((_chat) => { res.send(_chat); })\n    .catch(next);\n};\n\n/**\n* DELETE: /api/route2/:itemId\n* @param req\n* @param res\n* @param next\n*/\nmodule.exports.deleteItem = function (req, res, next) {\nco(function*(){\ntry{\n    let itemId = req.params.itemId;\n    yield Route2.destroy({\n        where: {\n            id: itemId\n        }\n    });\n    res.end();\n} catch(e){ next(e);}\n});\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/controller/api/route2.server.controller.js","'use strict';\n\nlet controller = require('../controller/api/profile.server.controller.js');\n\nmodule.exports = function(router) {\n    router.route('/api/stack')\n        .get(controller.getStack)\n        .post(controller.createStack);\n    return router;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/routes/profile.route.js","'use strict';\n\nlet db = require('../../../config/sequelize'),\n    Profile = db.Profile;\n\n/**\n *  GET: /api/stack\n *  @param req\n *  @param res\n *  @param next\n */\nmodule.exports.getStack = (req, res, next) => {\n\n    Profile.findAndCountAll({\n        attributes: ['id', 'skill', 'type', 'description', 'mastery']\n    })\n    .then((result) => res.send(result.rows))\n    .catch((err) => next(err));\n};\n\n/**\n *  POST: /api/stack\n *  @param req\n *  @param res\n *  @param next\n */\n module.exports.createStack = (req, res, next) => {\n\n     req.checkBody('skill', '스킬을 입력해주세요').notEmpty();\n     req.checkBody('type', '종류를 입력해주세요').notEmpty();\n     req.checkBody('description', '설명을 입력해주세요').notEmpty();\n     req.checkBody('mastery', '숙련도를 입력해주세요').notEmpty();\n\n     let errors = req.validationErrors();\n\n     if (errors){\n         res.send(errors[0]);\n         return;\n     }\n\n     let skill = req.body.skill,\n         type = req.body.type,\n         description = req.body.description,\n         mastery = req.body.mastery;\n\n     Profile.create({\n         skill: skill,\n         type: type,\n         description: description,\n         mastery: mastery\n     })\n     .then((result) => res.send(result))\n     .catch((err) => next(err));\n };\n\n\n\n// WEBPACK FOOTER //\n// ./app/controller/api/profile.server.controller.js","'use strict';\n\nvar controller = require('../controller/api/users.server.controller.js');\n\nmodule.exports = function(router) {\n    // 로그인 및 회원가입\n    // router.route('/auth/signup').post(controller.signup);\n    router.route('/auth/login').post(controller.login);\n    // router.route('/auth/logout').get(controller.logout);\n    // router.route('/auth/refresh').post(controller.refresh);\n\n    // 내정보 & 탈퇴\n    // router.route('/users/me')\n    //     .get(controller.requiresLogin, controller.getMyInfo)\n    //     .put(controller.requiresLogin, controller.changeMyInfo)\n    //     .delete(controller.requiresLogin, controller.leave);\n    //\n    // router.route('/users/email/verification').post(controller.emailVerification);\n    // router.route('/users/phone/verification').post(controller.phoneVerification);\n    // router.route('/users/phone/verification/send').post(controller.sendPhoneVerification);\n    //\n\n\n    // router.route('/users/password').post(controller.findPassword);\n    // router.route('/users/password/:token')\n    //     .get(controller.validateResetToken)\n    //     .put(controller.reset);\n\n\n    //\n    // router.route('/devices/:uuid').put(controller.changeDeviceGeom);\n\n    return router;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/routes/users.route.js","'use strict';\n\n/**\n * Extend user's controller\n */\n\n module.exports = Object.assign({},\n    require('./users/users.authentication.server.controller.js'),\n\trequire('./users/users.authorization.server.controller.js'),\n\trequire('./users/users.server.controller.js'),\n\trequire('./users/users.password.server.controller')\n);\n\n\n\n// WEBPACK FOOTER //\n// ./app/controller/api/users.server.controller.js","'use strict';\n\nlet passport = require('passport'),\n    bcrypt = require('bcrypt'),\n    jwt = require('../../../../config/jwt'),\n    config = require('../../../../config/env/all'),\n    db = require('../../../../config/sequelize'),\n    RefreshToken = db.RefreshToken;\n\n/**\n* POST: /auth/login\n* @param req\n* @param res\n* @param next\n*/\n\nmodule.exports.login = (req, res, next) => {\n    // check body\n    req.checkBody('userEmail', '이메일을 입력해주세요').notEmpty();\n    req.checkBody('password', '패스워드를 입력해주세요').notEmpty();\n    let errors = req.validationErrors();\n    if (!errors) {\n        passport.authenticate('local', (err, user, info) => {\n            if (err || !user) {\n                next({message: info.message || err.message, statusCode: 401});\n            } else {\n\n            let refreshToken = createRefreshToken();\n\n            RefreshToken.create({\n                refreshToken: refreshToken,\n                expiredAt: Date.now() + 1000 * 60 * 60 * 24 * 30,\n                UserId: user.id\n            }).then(() => {\n                let _user = {id: user.id, email: user.email};\n                let jwToken = jwt.generateToken(_user, req.hostname, next);\n                res.send({'refreshToken': refreshToken, 'jwToken': jwToken, 'user': user.email });\n            });\n            }\n        })(req, res, next);\n    } else {\n        res.send(errors[0]);\n    }\n};\n\n/**\n* POST: /auth/refresh\n* @param req\n* @param res\n* @param next\n*/\n\n// module.exports.refresh = (req, res, next) => {\n//     next();\n//     return 'e';\n//\n// };\n\n\n\nfunction createRefreshToken(){\n    let salt = bcrypt.genSaltSync(10);\n    return bcrypt.hashSync(config.tokenSecret, salt);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/controller/api/users/users.authentication.server.controller.js","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 39\n// module chunks = 0","'use strict';\n'추후 가능할 때 추가 작업 (user info 관련된 부분)';\n\n/*\n\nvar db = require('../../../../config/sequelize'),\n    BaseError = require('../../../models/abstract/BaseError'),\n    _ = require('lodash'),\n    async = require('async'),\n    User = db.User,\n    i18n = require('i18n'),\n    DeviceInfo = db.DeviceInfo,\n    PhoneVerification = db.PhoneVerification,\n    config = require('../../../../config/config'),\n    aws = require('../../../../config/aws'),\n    sms = require('../../../../config/sms'),\n    crypto = require('crypto');\n\n\n * GET: /users/me\n * Roles: ['user', 'truck']\n * @param req\n * @param res\n * @param next\n\nmodule.exports.getMyInfo = function(req, res, next) {\n    var user = req.user;\n\n    User.findOne({\n        where: {\n            id: user.id\n        },\n        attributes: ['id', 'profile', 'roles', 'username', 'email', 'phone', 'emailAgreedAt', 'smsAgreedAt', 'createdAt']\n    }).then(function(user) {\n        res.send(user);\n    }).catch(next);\n};\n\n\n * PUT: /users/me\n * Roles: ['user', 'truck']\n * @param req\n * @param res\n * @param next\n\nmodule.exports.changeMyInfo = function(req, res, next) {\n    var user = req.user;\n\n    var isAgreeEmail = req.body.isAgreeEmail;\n    var isAgreeSMS = req.body.isAgreeSMS;\n\n    async.waterfall([\n        function(nextStep) {\n            User.findOne({\n                where: {\n                    id: user.id\n                },\n                attributes: ['id', 'email', 'username', 'emailAgreedAt', 'smsAgreedAt', 'phone', 'profile']\n            }).then(function(user) {\n                if (!user) {\n                    nextStep(BaseError.getNotFoundErrorInstance(i18n.__('errors.notFound')));\n                } else {\n                    nextStep(null, user);\n                }\n            }).catch(nextStep);\n        },\n        function(user, nextStep) {\n            var editableKeys = ['password', 'username', 'phone', 'profile'];\n\n            if (isAgreeEmail && !user.emailAgreedAt) {\n                user.emailAgreedAt = new Date();\n            } else if (!isAgreeEmail && user.emailAgreedAt) {\n                user.emailAgreedAt = null;\n            }\n\n            if (isAgreeSMS && !user.smsAgreedAt) {\n                user.smsAgreedAt = new Date();\n            } else if (!isAgreeSMS && user.smsAgreedAt) {\n                user.smsAgreedAt = null;\n            }\n\n            _.each(editableKeys, function(key) {\n                if (req.body[key]) {\n                    user[key] = req.body[key];\n                }\n            });\n\n            user.save().then(function(user) {\n                nextStep(null, user);\n            }).catch(nextStep);\n        }\n    ], function(err, user) {\n        if (err) next(err);\n        else {\n            user.password = undefined;\n            res.send(user);\n        }\n    });\n\n};\n\n\n * PUT: /devices/:uuid\n * @param req\n * @param res\n * @param next\n\nmodule.exports.changeDeviceGeom = function(req, res, next) {\n    req.checkBody('lat', i18n.__('errors.requireParams')).notEmpty().isFloat();\n    req.checkBody('lng', i18n.__('errors.requireParams')).notEmpty().isFloat();\n    var errors = req.validationErrors();\n    if (errors) {\n        return next({message: errors[0].msg, statusCode: 400});\n    }\n\n    var uuid = req.params.uuid;\n    var lat = req.body.lat;\n    var lng = req.body.lng;\n\n    var currentGeom = {\n        type: 'Point',\n        coordinates: [lng, lat]\n    };\n    DeviceInfo.update({\n        currentGeom: currentGeom,\n        currentUpdatedAt: new Date()\n    },{\n        where: {\n            uuid: uuid\n        }\n    }).then(function() {\n        res.end();\n        // Close Statistics Query\n        var userId = req.user ? req.user.id : undefined;\n        aws.dynamoDB.createItem(aws.CONST.DYNAMO_DB.TABLE.USER_ROUTE, {\n            userId: userId,\n            deviceUUID: uuid,\n            currentGeom: currentGeom\n        });\n    }).catch(next);\n};\n\n\n * POST: /users/email/verification\n * @param req\n * @param res\n * @param next\n\nmodule.exports.emailVerification = function(req, res, next) {\n    req.checkBody('email', i18n.__('errors.requireParams')).notEmpty().isEmail();\n    var errors = req.validationErrors();\n    if (errors) {\n        return next({message: errors[0].msg, statusCode: 400});\n    }\n\n    var email = req.body.email;\n    User.count({\n        where: {\n            email: email\n        },\n        paranoid: false\n    }).then(function(cnt) {\n        if (cnt > 0) next({message: i18n.__('errors.alreadyExistEmail'), statusCode: 409});\n        else res.end();\n    }).catch(next);\n};\n\n\n * POST: /users/phone/verification\n * @param req\n * @param res\n * @param next\n\nmodule.exports.phoneVerification = function(req, res, next) {\n    req.checkBody('phone', i18n.__('errors.requireParams')).notEmpty();\n    req.checkBody('verificationCode', i18n.__('errors.requireParams')).notEmpty();\n    var errors = req.validationErrors();\n    if (errors) {\n        return next({message: errors[0].msg, statusCode: 400});\n    }\n\n    var phone = req.body.phone;\n    var verificationCode = req.body.verificationCode;\n    PhoneVerification.findOne({\n        where: {\n            phone: phone,\n            verificationCode: verificationCode,\n            expiredAt: {\n                $gt: new Date()\n            }\n        }\n    }).then(function(exist) {\n        if (exist) {\n            res.end();\n        } else {\n            next(BaseError.getNotFoundErrorInstance(i18n.__('errors.smsVerificationCode')));\n        }\n    }).catch(next);\n\n};\n\n\n * POST: /users/phone/verification/send\n * @param req\n * @param res\n * @param next\n\nmodule.exports.sendPhoneVerification = function(req, res, next) {\n    req.checkBody('phone', i18n.__('errors.requireParams')).notEmpty();\n    var errors = req.validationErrors();\n    if (errors) {\n        return next({message: errors[0].msg, statusCode: 400});\n    }\n    var phone = req.body.phone;\n\n    async.waterfall([\n        function(nextStep) {\n            PhoneVerification.findOne({\n                where: {\n                    phone: phone,\n                    expiredAt: {\n                        $gt: new Date()\n                    }\n                }\n            }).then(function(exist) {\n                if (exist) {\n                    nextStep({message: i18n.__('errors.alreadySendVerification'), statusCode: 409});\n                } else {\n                    nextStep();\n                }\n            }).catch(nextStep);\n        },\n        function(nextStep) {\n            var verificationCode = _.padStart(_.random(0, 999999), 6, '0');\n            PhoneVerification.create({\n                phone: phone,\n                verificationCode: verificationCode,\n                expiredAt: Date.now() + (60 * 1000 * 3) // 3 minute\n            }).then(function() {\n                nextStep(null, verificationCode);\n            }).catch(nextStep);\n        },\n        function(verificationCode, nextStep) {\n            sms.sendSMS(phone, i18n.__('sms.verificationCode', verificationCode)).then(function() {\n                nextStep(null, verificationCode);\n            }, nextStep);\n        }\n    ], function(err, verificationCode) {\n        if (err) next(err);\n        else res.end();\n    });\n};\n\n\n * DELETE: /users/me\n * 회원탈퇴\n * @param req\n * @param res\n * @param next\n\nmodule.exports.leave = function(req, res, next) {\n    var user = req.user;\n    User.destroy({\n        where: {\n            id: user.id\n        }\n    }).then(function() {\n        res.end();\n    }).catch(next);\n};\n\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./app/controller/api/users/users.server.controller.js","'use strict';\n\n// 비밀번호 찾기 controller\n\n\n\n// WEBPACK FOOTER //\n// ./app/controller/api/users/users.password.server.controller.js","'use strict';\n\nmodule.exports = () => {\n    require('./strategies/local')();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config/passport.js","'use strict';\n\nlet passport = require('passport'),\n    LocalStrategy = require('passport-local').Strategy,\n    db = require('../sequelize'),\n    User = db.User;\n\nmodule.exports = () => {\n    // Use local strategy\n    passport.use(new LocalStrategy({\n        usernameField: 'userEmail',\n        passwordField: 'password'\n    },(userEmail, password, done) => {\n\n        User.findOne({\n            where: {\n                email: userEmail\n            }\n         })\n        .then((user) => {\n            // 유저 없음\n            if(!user) {\n                return done(null, false, {message: '등록된 아이디가 아닙니다.'});\n            }\n            // 비밀번호 인증 실패\n            if(!user.authenticate(password)) {\n                return done(null, false, {message: '비밀번호가 틀렸습니다.'});\n            }\n            return done(null, user);\n        }).catch((err) => { console.log(err); done(err); }); //eslint-disable-line\n    }));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config/strategies/local.js","module.exports = require(\"passport-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-local\"\n// module id = 45\n// module chunks = 0","const webpack = require('webpack');\nconst nodeExternals = require('webpack-node-externals');\n\nmodule.exports = {\n\n  target: 'node',\n  externals: [nodeExternals()],\n  node: { __dirname: false },\n\n  entry: [\n    './server.js',\n    'webpack-dev-server/client?http://0.0.0.0:3002',\n    'webpack/hot/only-dev-server'\n  ],\n\n  output: {\n    path: '/',\n    filename: 'app.js'\n  },\n\n  devServer: {\n    hot: true,\n    filename: 'app.js',\n    publicPath: '/',\n    historyApiFallback: true,\n    contentBase: './dist',\n    proxy: {\n      \"**\": \"http://localhost:8000\"\n    }\n  },\n\n  plugins: [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin()\n  ],\n\n  module: {\n    loaders: [{\n      test: /\\.js$/,\n      loader: 'babel',\n      exclude: /node_modules/ ,\n      query: {\n        cacheDirectory: true,\n        presets: ['es2015']\n      }\n    }]\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webpack.dev.config.js","module.exports = require(\"webpack-node-externals\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-node-externals\"\n// module id = 47\n// module chunks = 0"],"sourceRoot":""}